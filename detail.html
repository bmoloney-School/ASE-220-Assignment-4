<!DOCTYPE html>
<html>

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <link href="./style.css" rel="stylesheet" />
</head>

<body>
    <header>
        <div class="collapse bg-dark" id="navbarHeader">
        </div>
        <div class="navbar navbar-dark bg-dark shadow-sm">
            <div class="container">
                <a href="#" class="navbar-brand d-flex align-items-center">
                    <strong>Kenton Shelter</strong>
                </a>
            </div>
        </div>
    </header>
    <main>
        <div id="carouselExampleFade" class="carousel slide carousel-fade" data-bs-ride="carousel">
            <div class="carousel-inner">

            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade"
                data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade"
                data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
        <div class="pet-description">

        </div>
        <div class="pet-description">
            <h2>Where can you find me?</h2>
            <p>I am at the Kenton County Animal Shelter. </p>
            <p><strong>Phone:&nbsp;</strong>(859) 356-7400</p>
            <p><strong>Address:&nbsp;</strong> 1020 Mary Laidley Ft Mitchell, KY 41017</p>
        </div>
    </main>
    <footer class="text-muted py-5">
        <div class="container">
            <p class="float-end mb-1">
                <a href="#">Back to top</a>
            </p>
        </div>
    </footer>
    <script>
        var petsJson = {
            "pets": [
                {
                    "name": "Benny",
                    "type": "Dog",
                    "breeds": ["Australian Shepherd Cross"],
                    "sex": "Male",
                    "color": "Brown/White",
                    "isFixed": true,
                    "age": "2Yrs 1Mths 4Wks",
                    "isHealthChecked": true,
                    "isVaccinated": true,
                    "isWormed": true,
                    "isChipped": true,
                    "animalId": 23531,
                    "chipNumber": 985113005872810,
                    "suitability": ["Not Suitable for Children"],
                    "aboutMe": null,
                    "imageUrls": ["https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Ftse1.mm.bing.net%2Fth%3Fid%3DOIP.1nIgCp1Vf22_jaEAJKae3gHaFD%26pid%3DApi&f=1"]
                },
                {
                    "name": "Cornelia",
                    "type": "Dog",
                    "breeds": ["Boxer Cross", "Second Breed"],
                    "sex": "Female",
                    "color": "White",
                    "isFixed": true,
                    "age": "6Yrs 2Mths 3Wks",
                    "isHealthChecked": true,
                    "isVaccinated": true,
                    "isWormed": true,
                    "isChipped": true,
                    "animalId": 23390,
                    "chipNumber": 985113005872687,
                    "suitability": ["OK with Dogs", "Laid Back", "Shy"],
                    "aboutMe": "Cornelia is a dog. She does dog things and acts much like a dog. You should get her.",
                    "imageUrls": ["https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Ftse1.mm.bing.net%2Fth%3Fid%3DOIP.XPBL6RecJjKyPFoCkb7GPAHaGo%26pid%3DApi&f=1", "https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Ftse1.mm.bing.net%2Fth%3Fid%3DOIP.GfbPprByKN_DB23kd022LQHaHa%26pid%3DApi&f=1"]
                },
                {
                    "name": "Hemingway",
                    "type": "Cat",
                    "breeds": ["Domestic Short Hair Cross"],
                    "sex": "Male",
                    "color": "Grey",
                    "isFixed": true,
                    "age": "3Yrs 3Wks",
                    "isHealthChecked": true,
                    "isVaccinated": true,
                    "isWormed": true,
                    "isChipped": false,
                    "animalId": 23897,
                    "chipNumber": null,
                    "suitability": "Special Needs",
                    "aboutMe": null,
                    "imageUrls": ["https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Ftse1.mm.bing.net%2Fth%3Fid%3DOIP.EF7pgHtwZG4sblAjz3ZZWAHaE8%26pid%3DApi&f=1", "https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Ftse1.mm.bing.net%2Fth%3Fid%3DOIP.jPxLJ1IYvqNRzuJMWkDXeAHaLH%26pid%3DApi&f=1"]
                },
                {
                    "name": "Howard",
                    "type": "Cat",
                    "breeds": ["Domestic Short Hair Cross"],
                    "sex": "Male",
                    "color": "Grey",
                    "isFixed": true,
                    "age": "Adult",
                    "isHealthChecked": true,
                    "isVaccinated": true,
                    "isWormed": true,
                    "isChipped": false,
                    "animalId": 23882,
                    "chipNumber": null,
                    "suitability": "Special Needs",
                    "aboutMe": null,
                    "imageUrls": ["https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Ftse1.mm.bing.net%2Fth%3Fid%3DOIP.NBb9TvOeGcKIbtknqlA5UAHaFA%26pid%3DApi&f=1", "https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Ftse1.mm.bing.net%2Fth%3Fid%3DOIP.nqKHjgkbHQC6EAF5ELgOmgHaE8%26pid%3DApi&f=1"]
                },
                {
                    "name": "Wishbone",
                    "type": "Dog",
                    "breeds": ["American Bulldog Cross"],
                    "sex": "Male",
                    "color": "Black",
                    "isFixed": true,
                    "age": "2Yrs 2Mths 2Wks",
                    "isHealthChecked": true,
                    "isVaccinated": true,
                    "isWormed": true,
                    "isChipped": true,
                    "animalId": 20579,
                    "chipNumber": 985113004709947,
                    "suitability": null,
                    "aboutMe": "Wishbone is a dog who likes to do dog things. He is around 2 years old but still acts like a puppy. He enjoys people. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",
                    "imageUrls": ["https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Ftse4.mm.bing.net%2Fth%3Fid%3DOIP.zHHIhGNGOpULCZ_uHPl_twHaES%26pid%3DApi&f=1", "https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Ftse4.mm.bing.net%2Fth%3Fid%3DOIP.lKv80ln-KW3fP2aKsyVeWQHaFF%26pid%3DApi&f=1", "https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Ftse3.mm.bing.net%2Fth%3Fid%3DOIP.KqmUSS9QmeXSfjzRHfxBWwHaJ4%26pid%3DApi&f=1"]
                },
                {
                    "name": "Niko",
                    "type": "Cat",
                    "breeds": ["Domestic Longhair Cross"],
                    "sex": "Male",
                    "color": "Grey Tabby/White",
                    "isFixed": true,
                    "age": "3Mths 3Wks",
                    "isHealthChecked": true,
                    "isVaccinated": true,
                    "isWormed": true,
                    "isChipped": true,
                    "animalId": 23541,
                    "chipNumber": 985113006299812,
                    "suitability": null,
                    "aboutMe": null,
                    "imageUrls": ["https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Ftse4.mm.bing.net%2Fth%3Fid%3DOIP.2xl8rfONRzFklWCCnXTsbwHaHC%26pid%3DApi&f=1", "https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Ftse2.mm.bing.net%2Fth%3Fid%3DOIP.GuBpOJt8ovcTddO81f_zswHaEK%26pid%3DApi&f=1"]
                }
            ]
        }
        function getAllUrlParams(url) {
            // get query string from url (optional) or window
            var queryString = url ? url.split('?')[1] : window.location.search.slice(1);

            // we'll store the parameters here
            var obj = {};

            // if query string exists
            if (queryString) {

                // stuff after # is not part of query string, so get rid of it
                queryString = queryString.split('#')[0];

                // split our query string into its component parts
                var arr = queryString.split('&');

                for (var i = 0; i < arr.length; i++) {
                    // separate the keys and the values
                    var a = arr[i].split('=');

                    // set parameter name and value (use 'true' if empty)
                    var paramName = a[0];
                    var paramValue = typeof (a[1]) === 'undefined' ? true : a[1];

                    // (optional) keep case consistent
                    paramName = paramName.toLowerCase();
                    if (typeof paramValue === 'string') paramValue = paramValue.toLowerCase();

                    // if the paramName ends with square brackets, e.g. colors[] or colors[2]
                    if (paramName.match(/\[(\d+)?\]$/)) {

                        // create key if it doesn't exist
                        var key = paramName.replace(/\[(\d+)?\]/, '');
                        if (!obj[key]) obj[key] = [];

                        // if it's an indexed array e.g. colors[2]
                        if (paramName.match(/\[\d+\]$/)) {
                            // get the index value and add the entry at the appropriate position
                            var index = /\[(\d+)\]/.exec(paramName)[1];
                            obj[key][index] = paramValue;
                        } else {
                            // otherwise add the value to the end of the array
                            obj[key].push(paramValue);
                        }
                    } else {
                        // we're dealing with a string
                        if (!obj[paramName]) {
                            // if it doesn't exist, create property
                            obj[paramName] = paramValue;
                        } else if (obj[paramName] && typeof obj[paramName] === 'string') {
                            // if property does exist and it's a string, convert it to an array
                            obj[paramName] = [obj[paramName]];
                            obj[paramName].push(paramValue);
                        } else {
                            // otherwise add the property
                            obj[paramName].push(paramValue);
                        }
                    }
                }
            }
            return obj;
        }
        function showPet(pet) {
            var carouselRoot = document.getElementsByClassName("carousel-inner")[0];
            var textRoot = document.getElementsByClassName("pet-description")[0];
            pet.imageUrls.forEach(image => {
                //Image carousel
                if (image == pet.imageUrls[0]) {
                    carouselRoot.innerHTML +=
                        `
                    <div class="carousel-item active">
                        <img src="${image}" class="d-block w-100" alt="...">
                    </div>
                    `
                }
                else {
                    carouselRoot.innerHTML +=
                        `
                    <div class="carousel-item">
                        <img src="${image}" class="d-block w-100" alt="...">
                    </div>
                    `
                }
            });
            // Text content
            textRoot.innerHTML +=
                `
                <h1>${pet.name}</h1>
                <strong>Type:</strong>
                <p>
                    ${pet.type}
                </p>
                `
            textRoot.innerHTML += `<strong>Breeds:</strong>`;
            pet.breeds.forEach(breed => {
                textRoot.innerHTML +=
                    `
                <p>
                    ${breed}
                </p>
                `
            });
            textRoot.innerHTML +=
                `
                <strong>Sex:</strong>
                <p>
                    ${pet.sex}
                </p>
                <strong>Color:</strong>
                <p>
                    ${pet.color}
                </p>
                <strong>Spayed/Neutered:</strong>
                <p>
                    ${pet.isFixed ? "Yes" : "No"}
                </p>
                <strong>Age:</strong>
                <p>
                    ${pet.age}
                </p>
                <h2>Animal Identification</h2>
                <strong>Animal ID:</strong>
                <p>
                    ${pet.animalId}
                </p>
                `
            if (pet.isChipped) {
                textRoot.innerHTML +=
                    `
                        <strong>Microchip Number:</strong>
                        <p>
                            ${pet.chipNumber}
                        </p>
                        `;
            }
            textRoot.innerHTML +=
                `
                <h2>Suitabiltiy Guide</h2>
                `;
            if (pet.suitability) {
                pet.suitability.forEach(element => {
                    textRoot.innerHTML +=
                        `
                            <p>
                                ${element}
                            </p>
                            `
                });
            }
            if (pet.aboutMe) {
                textRoot.innerHTML +=
                    `
                    <h2>About Me:</h2>
                    <p>
                        ${pet.aboutMe}
                    </p>
                    `
            }
        }
        var pets = JSON.parse(JSON.stringify(petsJson)).pets;
        var petContainer = document.getElementById("pet-container")
        var pet = pets[getAllUrlParams().index];
        showPet(pet);


    </script>
</body>

</html>